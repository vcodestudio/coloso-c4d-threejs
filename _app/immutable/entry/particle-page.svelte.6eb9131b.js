import{S as Q,i as X,s as Y,k as Z,l as ee,m as te,h as O,n as ae,b as ne,I as k,o as ie,w as oe}from"../chunks/index.2ecc7cbf.js";import{C as L,P as re,S as se,F as le,W as ce,s as pe,B as R,j as F,k as B,T as D,l as G,m as I,e as de,D as $,i as ue}from"../chunks/three.module.2b01c56e.js";import{O as me}from"../chunks/OrbitControls.938ce638.js";import{G as fe}from"../chunks/GLTFLoader.6b96b0db.js";function we(m){let t;return{c(){t=Z("canvas"),this.h()},l(c){t=ee(c,"CANVAS",{class:!0}),te(t).forEach(O),this.h()},h(){ae(t,"class","svelte-1sqt1e7")},m(c,f){ne(c,t,f),m[1](t)},p:k,i:k,o:k,d(c){c&&O(t),m[1](null)}}}function u(m){let t=Math.sin(m)*1e4;return t-Math.floor(t)}function he(m,t,c){let f,_,n,y,w,p,r,v,A,h,z,W,S=[];new L("hsl(30,100%,60%)");let s;ie(()=>{j(),E()});function j(){const i=new L("hsl(280,100%,0%)");_=new re(30,window.innerWidth/window.innerHeight,1,3e3),_.position.set(30,0,30),n=new se,n.background=i,n.fog=new le(i,40,80),y=new ce({antialias:!0,canvas:f}),y.setSize(window.innerWidth,window.innerHeight),y.outputEncoding=pe,w=new me(_,y.domElement),w.target.set(0,0,0),w.enableDamping=!0,w.minDistance=50,w.maxDistance=50,r=1e3,p=new R;let d=new Float32Array(r*3),a=new Float32Array(r*3),g=new L,U=new Float32Array(r),b=20;for(let e=0;e<r;e++){let l=Math.sin(e/r*Math.PI*2)*b+(u(e*3)-.5)*b,o=(u(e*3+1)-.5)*b*.5,M=Math.cos(e/r*Math.PI*2)*b+(u(e*3+2)-.5)*b;d[e*3]=l,d[e*3+1]=o,d[e*3+2]=M,g.setHSL((l+o+60)*.15/16,.5,Math.random()),a[e*3]=g.r,a[e*3+1]=g.g,a[e*3+2]=g.b,U[e]=10*(.1+Math.random())}p.setAttribute("position",new F(d,3)),p.setAttribute("color",new F(a,3)),S=d;let V=new B({size:.5,vertexColors:!0,map:new D().load("/particle/circle.png"),blending:G,transparent:!0,depthWrite:!1,opacity:.8});v=new I(p,V),n.add(v),h=200,A=new R;let P=new Float32Array(h*3),x=new Float32Array(h*3),C=new L;for(let e=0;e<h;e++){let l=(Math.sin(e/h*Math.PI*2)+(u(e*3)-.5)*.5)*20,o=(u(e*3+1)-.5)*20,M=(Math.cos(e/h*Math.PI*2)+(u(e*3+2)-.5)*.5)*20;P[e*3]=l,P[e*3+1]=o,P[e*3+2]=M,C.setHSL(.55,.5,u(e*3)*.001),x[e*3]=C.r,x[e*3+1]=C.g,x[e*3+2]=C.b}A.setAttribute("position",new F(P,3)),A.setAttribute("color",new F(x,3));let J=new B({vertexColors:!0,size:20,map:new D().load("/particle/cloud.png"),blending:G,transparent:!0,opacity:.005,depthWrite:!1});z=new I(p,J),n.add(z);let K=new B({vertexColors:!0,size:100,map:new D().load("/particle/cloud.png"),blending:G,transparent:!0,opacity:1,depthWrite:!1});W=new I(A,K),n.add(W),new fe().load("../particle/model.glb",function(e){s=e.scene;const l=.15;s.scale.set(l,l,l),s.position.set(0,-40,0),s.rotation.set(0,0,0),n.add(s),s.traverse(function(o){if(o.isMesh){console.log(o.material);let M=new de({color:16777215,roughness:.8,bumpMap:o.material.normalMap,bumpScale:.1});o.material=M,o.castShadow=!0,o.receiveShadow=!0}})});let H=new $(16777215,1);H.position.set(-.1,0,-1),n.add(H);let q=new ue("hsl(180,50%,60%)",5,50);q.position.set(0,30,0),n.add(q);let T=new $("hsl(200,50%,50%)",.1);T.position.set(-.5,1,0),n.add(T)}function E(){requestAnimationFrame(E),w.update();const i=.001;v.rotation.y+=i,z.rotation.y+=i,W.rotation.y+=i,s&&(s.rotation.y+=.005);let d=p.attributes.position.array;for(let a=0;a<r;a++){S[a*3];let g=S[a*3+1];S[a*3+2],d[a*3+1]=g+Math.sin((a+v.rotation.y)*i*3e4)*i*10}p.attributes.position.needsUpdate=!0,y.render(n,_)}function N(i){oe[i?"unshift":"push"](()=>{f=i,c(0,f)})}return[f,N]}class ve extends Q{constructor(t){super(),X(this,t,he,we,Y,{})}}export{ve as default};
