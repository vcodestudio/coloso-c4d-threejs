import{S as V,i as q,s as U,y as X,a as Y,k as Z,z as J,c as K,l as Q,m as ee,h as j,n as R,A as ne,b as W,I as te,g as oe,d as ae,B as ie,o as se,w as re}from"../chunks/index.2ecc7cbf.js";import{C as u,P as ce,S as le,F as me,W as de,s as ue,as as fe,H as pe,a as we,L as A,g as ge,M as be,b as he,R as _e,V as $,c as ve}from"../chunks/three.module.ef5c776a.js";import{O as ye}from"../chunks/OrbitControls.d7616f01.js";import{G as Me}from"../chunks/GLTFLoader.b6027147.js";import{E as ke,R as Pe,U as Ce}from"../chunks/UnrealBloomPass.986871b8.js";import{C as xe}from"../chunks/cursor.d83b6330.js";function je(M){let c,w,o,n;return c=new xe({}),{c(){X(c.$$.fragment),w=Y(),o=Z("canvas"),this.h()},l(e){J(c.$$.fragment,e),w=K(e),o=Q(e,"CANVAS",{id:!0,class:!0}),ee(o).forEach(j),this.h()},h(){R(o,"id","canvas"),R(o,"class","svelte-1p4771a")},m(e,t){ne(c,e,t),W(e,w,t),W(e,o,t),M[1](o),n=!0},p:te,i(e){n||(oe(c.$$.fragment,e),n=!0)},o(e){ae(c.$$.fragment,e),n=!1},d(e){ie(c,e),e&&j(w),e&&j(o),M[1](null)}}}function Ae(M,c,w){let o,n,e,t,a,g,L,C,v;const z=new ve;let k="background_1";const F=[new u("hsl(240, 100%, 50%)"),new u("hsl(10, 100%, 50%)"),new u("hsl(190, 100%, 50%)"),new u("hsl(200, 100%, 100%)")];se(()=>{H(),B()});function H(){n=new ce(35,window.innerWidth/window.innerHeight,1,2e3),n.position.set(0,0,100),e=new le;const f=new u("hsl(200, 100%, 20%)");e.background=new u(f),e.fog=new me(f,850,1200),t=new de({antialias:!0,canvas:o}),t.setPixelRatio(window.devicePixelRatio),t.setSize(window.innerWidth,window.innerHeight),t.outputEncoding=ue,t.toneMapping=fe,t.toneMappingExposure=3,window.addEventListener("resize",I);const O=new pe(16777215,0,1);O.position.set(0,500,0),e.add(O),S(),new Me().load("/scene/scene-1-bake-2.glb",function(m){const r=m.scene;console.log("root",m);const b=.1;r.scale.set(b,b,b);const h=m.cameras[0];if(n.position.set(h.position.x*b,h.position.y*b,h.position.z*b),n.rotation.set(h.rotation.x,h.rotation.y,h.rotation.z),a=new ye(n,t.domElement),a.target.set(0,90,0),a.enablePan=!1,a.enableZoom=!1,a.minPolarAngle=Math.PI/2,a.maxPolarAngle=Math.PI/2,a.minAzimuthAngle=-.5*Math.PI/2,a.maxAzimuthAngle=.5*Math.PI/2,a.dampingFactor=.05,a.enableDamping=!0,a.update(),g=new we(r),m.animations,L=g.clipAction(m.animations[0]),L.loop=A,r.traverse(function(i){i.isMesh&&(i.material=new ge({color:i.material.color??16777215,map:i.material.map,userData:{color:i.material.color}}),i.name.toLowerCase()=="button")}),r.getObjectByName("realtime").traverse(function(i){i.isMesh&&(i.material=new be({color:i.material.color??16777215,map:i.material.map}))}),e.add(r),r.getObjectByName("background_1").visible=!1,r.getObjectByName("background_2").visible=!1,r.getObjectByName(k).visible=!0,m.animations.length>0){let T=function(d){x.x=d.clientX/window.innerWidth*2-1,x.y=-(d.clientY/window.innerHeight)*2+1},D=function(d){E.setFromCamera(x,n);const p=E.intersectObjects(e.children,!0);if(p.length>0&&p[0].object.name.toLowerCase().includes("button")){const _=P.find(s=>s.name==p[0].object.name.toLowerCase());if(_){const s=g.clipAction(_);s.loop=A,s.reset(),s.play()}const y=p[0].object.name.toLowerCase().replace("button_","");if(y.includes("color")){const s=r.getObjectByName("change"),l=y.split("color_")[1];s.material.color=F[l-1]}else if(y.includes("right")||y.includes("left")){const s=r.getObjectByName("background_1"),l=r.getObjectByName("background_2"),N=r.getObjectByName("panel_background");s.visible=!1,l.visible=!1,k=="background_1"?(l.visible=!0,k="background_2",N.material.color=new u("blue")):(s.visible=!0,k="background_1",N.material.color=new u("#66FF00"))}else if(y.includes("publish")){const s=P.find(l=>l.name=="rocket");if(s){const l=g.clipAction(s);l.loop=A,l.clampWhenFinished=!0,l.play(),setTimeout(()=>{document.body.className="end"},1500),setTimeout(()=>{location.href=location.href},3e3)}}}};const i=m.animations[0].tracks,P=[];i.forEach(d=>{const p=P.find(_=>_.name==d.name.split(".")[0]);if(p)p.tracks.push(d);else{const _=new he(d.name.split(".")[0],-1,[d]);P.push(_)}});const E=new _e,x=new $;window.addEventListener("mousemove",T,!1),window.addEventListener("click",D,!1)}},void 0,function(m){console.error(m)})}function S(){C=new ke(t),C.addPass(new Pe(e,n)),v=new Ce(new $(window.innerWidth,window.innerHeight),1.5,.4,.85),v.threshold=.75,v.strength=1.5,v.radius=1,C.addPass(v)}function I(){n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)}function B(){requestAnimationFrame(B),t.render(e,n),a&&a.update();const f=z.getDelta();g&&g.update(f)}function G(f){re[f?"unshift":"push"](()=>{o=f,w(0,o)})}return[o,G]}class ze extends V{constructor(c){super(),q(this,c,Ae,je,U,{})}}export{ze as default};
