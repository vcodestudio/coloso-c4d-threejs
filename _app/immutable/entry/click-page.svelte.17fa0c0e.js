import{S as W,i as z,s as E,k as P,l as R,m as F,h as C,n as O,b as D,I as v,o as G,w as N}from"../chunks/index.2ecc7cbf.js";import{P as V,S as q,W as B,A as T,D as $,H as I,a as X,M as Y,b as J,R as K,V as Q,L as U,C as Z,c as ee}from"../chunks/three.module.ef5c776a.js";import{G as ne}from"../chunks/GLTFLoader.b6027147.js";function te(h){let n;return{c(){n=P("canvas"),this.h()},l(i){n=R(i,"CANVAS",{id:!0}),F(n).forEach(C),this.h()},h(){O(n,"id","canvas")},m(i,l){D(i,n,l),h[1](n)},p:v,i:v,o:v,d(i){i&&C(n),h[1](null)}}}function ae(h,n,i){let l,o,s,r,f,_,p;G(()=>{x(),S()});function x(){o=new V(45,window.innerWidth/window.innerHeight,1,2e3),o.position.set(100,100,100),o.lookAt(-20,0,-20),s=new q,r=new B({antialias:!0,canvas:l}),r.setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth,window.innerHeight),r.shadowMap.enabled=!0,r.toneMapping=T,window.addEventListener("resize",k);const e=new $(16777215,1);e.position.set(-1,1,.5),e.castShadow=!0,e.shadow.camera.top=180,e.shadow.camera.bottom=-100,e.shadow.camera.left=-120,e.shadow.camera.right=120,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,e.shadow.camera.near=.5,e.shadow.camera.far=500,s.add(e),p=new I(16777215,5592405,1),p.position.set(0,-1,0),s.add(p),new ne().load("../click/model.glb",function(u){const c=u.scene;if(c.position.set(0,0,0),c.scale.set(.1,.1,.1),s.add(c),f=new X(c),_=c.getObjectByName("rocket"),c.traverse(function(d){d.isMesh&&(d.material=new Y({color:d.material.color,roughness:.3}),d.castShadow=!0,d.receiveShadow=!0)}),u.animations.length>0){let A=function(a){b.x=a.clientX/window.innerWidth*2-1,b.y=-(a.clientY/window.innerHeight)*2+1},H=function(a){L.setFromCamera(b,o);const t=L.intersectObjects(s.children,!0);if(t.length>0&&t[0].object.name.toLowerCase().includes("button")){const w=g.find(m=>m.name==t[0].object.name.toLowerCase());if(w){const m=f.clipAction(w);m.loop=U,m.reset(),m.play(),s.background=new Z(t[0].object.material.color.getHex());const M=c.getObjectByName("change");M&&(M.material.color=t[0].object.material.color),p.color=t[0].object.material.color}}};const d=u.animations[0].tracks,g=[];d.forEach(a=>{const t=g.find(w=>w.name==a.name.split(".")[0]);if(t)t.tracks.push(a);else{const w=new J(a.name.split(".")[0],-1,[a]);g.push(w)}});const L=new K,b=new Q;window.addEventListener("mousemove",A,!1),window.addEventListener("click",H,!1)}})}function k(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}const y=new ee;function S(){requestAnimationFrame(S),f&&f.update(y.getDelta()),_.rotation.y+=.01,r.render(s,o)}function j(e){N[e?"unshift":"push"](()=>{l=e,i(0,l)})}return[l,j]}class ce extends W{constructor(n){super(),z(this,n,ae,te,E,{})}}export{ce as default};
