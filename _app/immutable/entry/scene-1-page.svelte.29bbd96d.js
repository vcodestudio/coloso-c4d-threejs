import{S as Y,i as N,s as X,y as Z,a as J,k as K,z as Q,c as ee,l as te,m as ne,h as v,n as ae,A as oe,b as $,I as se,g as ie,d as re,B as le,o as ce,w as me}from"../chunks/index.2ecc7cbf.js";import{P as pe,S as de,C as z,F as fe,W as we,s as ue,as as he,B as ge,j as k,k as be,T as F,m as Me,at as Pe,R as _e,V as B,a as xe,L as I,g as Ae,U as H,c as Ce}from"../chunks/three.module.ef5c776a.js";import{O as ye}from"../chunks/OrbitControls.d7616f01.js";import{G as Le}from"../chunks/GLTFLoader.b6027147.js";import{E as ve,R as ze,U as Re}from"../chunks/UnrealBloomPass.986871b8.js";import{C as Se}from"../chunks/cursor.d83b6330.js";function We(d){let s,f,r,a;return s=new Se({}),{c(){Z(s.$$.fragment),f=J(),r=K("canvas"),this.h()},l(e){Q(s.$$.fragment,e),f=ee(e),r=te(e,"CANVAS",{id:!0}),ne(r).forEach(v),this.h()},h(){ae(r,"id","canvas")},m(e,o){oe(s,e,o),$(e,f,o),$(e,r,o),d[1](r),a=!0},p:se,i(e){a||(ie(s.$$.fragment,e),a=!0)},o(e){re(s.$$.fragment,e),a=!1},d(e){le(s,e),e&&v(f),e&&v(r),d[1](null)}}}function R(d){let s=Math.sin(d)*1e4;return s-Math.floor(s)}function Ee(d,s,f){let r,a,e,o,i,b,w,_,g;const x=[],T=new Ce;let A;ce(()=>{j(),S()});function j(){a=new pe(35,window.innerWidth/window.innerHeight,1,2e3),a.position.set(0,0,100),e=new de;const p=new z("hsl(255, 70%, 40%)");e.background=new z(p),e.fog=new fe(p,850,1200),o=new we({antialias:!0,canvas:r}),o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),o.outputEncoding=ue,o.toneMapping=he,o.toneMappingExposure=3,window.addEventListener("resize",O);let u=300,C=new ge,M=new Float32Array(u*3),P=new Float32Array(u*3),W=650,y=650;for(let t=0;t<u;t++){let c=Math.sin(t/u*Math.PI*2)*W+(R(t*3)-.5)*y,l=(R(t*3+1)-.5)*y*.5,m=Math.cos(t/u*Math.PI*2)*W+(R(t*3+2)-.5)*y;M[t*3]=c,M[t*3+1]=l,M[t*3+2]=m;let n=new z(16777215);P[t*3]=n.r,P[t*3+1]=n.g,P[t*3+2]=n.b}C.setAttribute("position",new k(M,3)),C.setAttribute("color",new k(P,3));let V=new be({size:10,vertexColors:!0,map:new F().load("/misc/sphere.png"),transparent:!0,alphaTest:.5});A=new Me(C,V),A.position.set(0,60,0),e.add(A);const q=new Pe(16777215,1);e.add(q),G();const E=new _e,L=new B;function D(t){L.x=t.clientX/window.innerWidth*2-1,L.y=-(t.clientY/window.innerHeight)*2+1,E.setFromCamera(L,a);const c=E.intersectObjects(x);if(c.length>0){const l=c[0].object;l.name==="button"&&l.isMesh&&(w.loop=I,w.clampWhenFinished=!0,w.reset(),w.play())}}window.addEventListener("click",D,!1),new Le().load("/scene/scene-0-bake-2.glb",function(t){const c=t.scene;console.log("root",t);const l=.1;c.scale.set(l,l,l);const m=t.cameras[0];a.position.set(m.position.x*l,m.position.y*l,m.position.z*l),a.rotation.set(m.rotation.x,m.rotation.y,m.rotation.z),i=new ye(a,o.domElement),i.target.set(0,90,0),i.enablePan=!1,i.enableZoom=!1,i.minPolarAngle=Math.PI/2,i.maxPolarAngle=Math.PI/2,i.minAzimuthAngle=-.5*Math.PI/2,i.maxAzimuthAngle=.5*Math.PI/2,i.dampingFactor=.05,i.enableDamping=!0,i.update(),b=new xe(c),t.animations,w=b.clipAction(t.animations[0]),w.loop=I,c.traverse(function(n){n.isMesh&&(n.material=new Ae({color:n.material.color??16777215,map:n.material.map}),n.castShadow=!0,n.receiveShadow=!0,n.name.toLowerCase()=="button"&&x.push(n),n.name.toLowerCase()=="ground"&&new F().load("/misc/circle.exr",function(h){console.log("text",h),h.flipY=!1,h.wrapS=H,h.wrapT=H,h.repeat.set(1,1),n.material.map=h,n.material.transparent=!0,n.material.needsUpdate=!0}))}),console.log(c),e.add(c)},void 0,function(t){console.error(t)})}function G(){_=new ve(o),_.addPass(new ze(e,a)),g=new Re(new B(window.innerWidth,window.innerHeight),1.5,.4,.85),g.threshold=.75,g.strength=1.5,g.radius=1,_.addPass(g)}function O(){a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)}function S(){requestAnimationFrame(S),o.render(e,a),i&&i.update();const p=T.getDelta();b&&b.update(p),x.forEach(u=>{})}function U(p){me[p?"unshift":"push"](()=>{r=p,f(0,r)})}return[r,U]}class Ge extends Y{constructor(s){super(),N(this,s,Ee,We,X,{})}}export{Ge as default};
