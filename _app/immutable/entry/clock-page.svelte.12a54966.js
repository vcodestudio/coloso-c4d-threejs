import{S as D,i as $,s as F,k as S,a as H,q as W,l as y,m as M,h as f,c as A,r as G,n as C,b as I,E as l,I as N,o as j,w as V}from"../chunks/index.2ecc7cbf.js";import{C as q,P as B,S as J,W as K,s as O,A as Q,T as U,d as X,H as Y,D as Z,e as ee}from"../chunks/three.module.ef5c776a.js";import{G as te}from"../chunks/GLTFLoader.b6027147.js";function ne(R){let d,E,t,r,s,u,o,h,w,_,g,v,b,n;return{c(){d=S("canvas"),E=H(),t=S("div"),r=S("span"),s=H(),u=S("span"),o=W(":"),h=H(),w=S("span"),_=H(),g=S("span"),v=W(":"),b=H(),n=S("span"),this.h()},l(a){d=y(a,"CANVAS",{id:!0}),M(d).forEach(f),E=A(a),t=y(a,"DIV",{class:!0});var e=M(t);r=y(e,"SPAN",{class:!0}),M(r).forEach(f),s=A(e),u=y(e,"SPAN",{});var m=M(u);o=G(m,":"),m.forEach(f),h=A(e),w=y(e,"SPAN",{class:!0}),M(w).forEach(f),_=A(e),g=y(e,"SPAN",{});var c=M(g);v=G(c,":"),c.forEach(f),b=A(e),n=y(e,"SPAN",{class:!0}),M(n).forEach(f),e.forEach(f),this.h()},h(){C(d,"id","canvas"),C(r,"class","hour"),C(w,"class","min"),C(n,"class","sec"),C(t,"class","time svelte-1m1g914")},m(a,e){I(a,d,e),R[1](d),I(a,E,e),I(a,t,e),l(t,r),l(t,s),l(t,u),l(u,o),l(t,h),l(t,w),l(t,_),l(t,g),l(g,v),l(t,b),l(t,n)},p:N,i:N,o:N,d(a){a&&f(d),R[1](null),a&&f(E),a&&f(t)}}}function oe(R,d,E){let t,r,s,u,o={hour:null,min:null,sec:null,orbit:null,right:null,left:null};const h={day:{sky:new q("hsl(45,100%,60%)"),ground:new q("hsl(10,100%,50%)"),background:new q("hsl(20,80%,10%)")},night:{sky:16777215,ground:new q("hsl(180,80%,25%)"),background:new q("hsl(200,80%,15%)")}};j(()=>{w(),v()});function w(){t=new B(30,window.innerWidth/window.innerHeight,1,2e3),t.position.set(0,0,100),r=new J,s=new K({antialias:!0,canvas:u}),s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight),s.outputEncoding=O,s.shadowMap.enabled=!0,s.toneMapping=Q,s.toneMappingExposure=1;const n=new U().load("/sky/sky.jpg",function(){const e=new X(s);e.compileEquirectangularShader(),e.fromEquirectangular(n),n.dispose()});window.addEventListener("resize",g),new te().load("../time/model.glb",function(e){const m=e.scene,c=.1;m.position.set(0,0,0),m.scale.set(c,c,c),r.add(m),console.log(m);let k=h.day.sky,L=h.day.ground,z=h.day.background,P=new Date().getHours();P=3,(P<6||P>18)&&(k=h.night.sky,L=h.night.ground,z=h.night.background),s.setClearColor(z,1);const T=new Y(k,L,.5);T.position.set(0,1,0),r.add(T);const p=new Z(k,1);p.position.set(0,1,1),p.castShadow=!0,p.shadow.mapSize.width=2048,p.shadow.mapSize.height=2048,p.shadow.camera.left=-100,p.shadow.camera.right=100,p.shadow.camera.top=100,p.shadow.camera.bottom=-100,p.shadow.radius=2,r.add(p),m.traverse(function(i){if(["hour","min","sec","orbit","right","left"].forEach(x=>{i.name.toLowerCase().includes(x)&&(o[x]=i)}),i.isMesh){const x=i.material;i.material=new ee({color:x.color,roughness:x.roughness}),i.castShadow=!0,i.receiveShadow=!0}i.name.toLowerCase().includes("camera")&&(t.position.set(i.position.x*c,i.position.y*c,i.position.z*c),t.rotation.set(i.rotation.x,i.rotation.y,i.rotation.z))}),_()})}function _(){const n=new Date;let a=n.getHours();const e=n.getMinutes(),m=a/24,c=e/60,k=n.getSeconds()/60,L=document.querySelector(".hour"),z=document.querySelector(".min"),P=document.querySelector(".sec");L&&(L.innerHTML=a<10?`0${a}`:a),z&&(z.innerHTML=e<10?`0${e}`:e),P&&(P.innerHTML=n.getSeconds()<10?`0${n.getSeconds()}`:n.getSeconds()),o.hour&&(o.hour.rotation.z=-Math.PI*2*2*m),o.min&&(o.min.rotation.z=-Math.PI*2*c),o.sec&&(o.sec.rotation.z=-Math.PI*2*k)}function g(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}function v(){requestAnimationFrame(v),_(),o.right&&(o.right.rotation.z+=.001*Math.PI),o.left&&(o.left.rotation.z+=-.001*Math.PI/2),o.orbit&&(o.orbit.rotation.y+=.001*Math.PI),s.render(r,t)}function b(n){V[n?"unshift":"push"](()=>{u=n,E(0,u)})}return[u,b]}class ce extends D{constructor(d){super(),$(this,d,oe,ne,F,{})}}export{ce as default};
