import{S as R,i as j,s as G,k as x,a as k,l as y,m as b,h as w,c as q,n as _,b as C,E as D,I as L,o as F,w as I}from"../chunks/index.2ecc7cbf.js";import{P as T,S as V,C as E,W as $,s as B,A as N,H as J,a as K,e as M,i as O,h as Q}from"../chunks/three.module.ef5c776a.js";import{G as U}from"../chunks/GLTFLoader.b6027147.js";function X(u){let o,l,a,n;return{c(){o=x("canvas"),l=k(),a=x("div"),n=x("div"),this.h()},l(s){o=y(s,"CANVAS",{id:!0,class:!0}),b(o).forEach(w),l=q(s),a=y(s,"DIV",{class:!0});var i=b(a);n=y(i,"DIV",{class:!0});var c=b(n);c.forEach(w),i.forEach(w),this.h()},h(){_(o,"id","canvas"),_(o,"class","svelte-je6myb"),_(n,"class","svelte-je6myb"),_(a,"class","scroll svelte-je6myb")},m(s,i){C(s,o,i),u[1](o),C(s,l,i),C(s,a,i),D(a,n)},p:L,i:L,o:L,d(s){s&&w(o),u[1](null),s&&w(l),s&&w(a)}}}function Y(u,o,l){let a,n,s,i,c,f,h;F(()=>{H(),P()});function H(){n=new T(45,window.innerWidth/window.innerHeight,1,2e3),n.position.set(0,0,200),s=new V,s.background=new E(0),i=new $({antialias:!0,canvas:a}),i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),i.outputEncoding=B,i.shadowMap.enabled=!0,i.toneMapping=N,window.addEventListener("resize",A);const p=new J(16777215,0,.01);p.position.set(0,1,0),s.add(p),new U().load("/scroll/model.glb",function(d){const v=d.scene;v.position.set(0,0,0);const m=.1;v.scale.set(m,m,m),c=new K(v),s.add(v),h=c.clipAction(d.animations[0]),h.play();const g=document.querySelector(".scroll"),S=h.getClip().duration,r=d.cameras[0];r&&(n.position.set(r.position.x*m,r.position.y*m,r.position.z*m),n.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z),n.fov=r.fov),d.scene.traverse(function(e){if(e.isMesh&&(e.material=new M({color:e.material.color,emissive:e.material.emissive,roughness:1}),e.castShadow=!0,e.receiveShadow=!0),e.name.toLowerCase().includes("light")){const t=new O(16777215,1,200);t.position.set(e.position.x,e.position.y,e.position.z),e.add(t);const z=new E("hsl(40,100%,100%)");t.color=z,t.castShadow=!0,t.shadow.mapSize.width=512,t.shadow.mapSize.height=512,t.shadow.camera.near=.5,t.shadow.camera.far=500,t.shadow.radius=10,e.material.emissive=z}e.name.toLowerCase().includes("noshadow")&&(e.castShadow=!1,e.receiveShadow=!1),e.name.toLowerCase().includes("glass")&&(e.material=new M({color:e.material.color,transmission:1,roughness:.5,ior:1.8,emissive:e.material.emissive}),e.material.side=Q)}),g.addEventListener("scroll",e=>{f=g.scrollTop/(g.scrollHeight-g.clientHeight)*S,f>S-.03&&(f=S-.03),h.time=f,c.update(.01)})},void 0,function(d){console.error(d)})}function A(){n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)}function P(){requestAnimationFrame(P),c&&c.update(.001),i.render(s,n)}function W(p){I[p?"unshift":"push"](()=>{a=p,l(0,a)})}return[a,W]}class ne extends R{constructor(o){super(),j(this,o,Y,X,G,{})}}export{ne as default};
