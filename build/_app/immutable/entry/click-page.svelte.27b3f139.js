import{S as z,i as P,s as R,k as F,l as O,m as q,h as x,n as D,b as G,I as v,o as N,w as V}from"../chunks/index.2ecc7cbf.js";import{P as $,S as B,W as T,A as I,D as U,H as X,a as Y,M as J,b as K,R as Q,V as Z,L as ee,C as ne,c as te}from"../chunks/three.module.a6fd982f.js";import{G as ae}from"../chunks/GLTFLoader.a254f7ff.js";function ie(h){let n;return{c(){n=F("canvas"),this.h()},l(i){n=O(i,"CANVAS",{id:!0}),q(n).forEach(x),this.h()},h(){D(n,"id","canvas")},m(i,l){G(i,n,l),h[1](n)},p:v,i:v,o:v,d(i){i&&x(n),h[1](null)}}}function oe(h,n,i){let l,o,s,r,f,S,p;N(()=>{y(),_()});function y(){o=new $(45,window.innerWidth/window.innerHeight,1,2e3),o.position.set(100,100,100),o.lookAt(-20,0,-20),s=new B,r=new T({antialias:!0,canvas:l}),r.setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth,window.innerHeight),r.shadowMap.enabled=!0,r.toneMapping=I,window.addEventListener("resize",k);const e=new U(16777215,1);e.position.set(-1,1,.5),e.castShadow=!0,e.shadow.camera.top=180,e.shadow.camera.bottom=-100,e.shadow.camera.left=-120,e.shadow.camera.right=120,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,e.shadow.camera.near=.5,e.shadow.camera.far=500,s.add(e),p=new X(16777215,5592405,1),p.position.set(0,-1,0),s.add(p);const H=new ae,W=document.querySelector("input.baseUrl").value;H.load(`${W}click/model.glb`,function(u){const c=u.scene;if(c.position.set(0,0,0),c.scale.set(.1,.1,.1),s.add(c),f=new Y(c),S=c.getObjectByName("rocket"),c.traverse(function(d){d.isMesh&&(d.material=new J({color:d.material.color,roughness:.3}),d.castShadow=!0,d.receiveShadow=!0)}),u.animations.length>0){let E=function(a){b.x=a.clientX/window.innerWidth*2-1,b.y=-(a.clientY/window.innerHeight)*2+1},M=function(a){L.setFromCamera(b,o);const t=L.intersectObjects(s.children,!0);if(t.length>0&&t[0].object.name.toLowerCase().includes("button")){const w=g.find(m=>m.name==t[0].object.name.toLowerCase());if(w){const m=f.clipAction(w);m.loop=ee,m.reset(),m.play(),s.background=new ne(t[0].object.material.color.getHex());const C=c.getObjectByName("change");C&&(C.material.color=t[0].object.material.color),p.color=t[0].object.material.color}}};const d=u.animations[0].tracks,g=[];d.forEach(a=>{const t=g.find(w=>w.name==a.name.split(".")[0]);if(t)t.tracks.push(a);else{const w=new K(a.name.split(".")[0],-1,[a]);g.push(w)}});const L=new Q,b=new Z;window.addEventListener("mousemove",E,!1),window.addEventListener("click",M,!1),window.addEventListener("touchstart",M,!1)}})}function k(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}const j=new te;function _(){requestAnimationFrame(_),f&&f.update(j.getDelta()),S.rotation.y+=.01,r.render(s,o)}function A(e){V[e?"unshift":"push"](()=>{l=e,i(0,l)})}return[l,A]}class de extends z{constructor(n){super(),P(this,n,oe,ie,R,{})}}export{de as default};
