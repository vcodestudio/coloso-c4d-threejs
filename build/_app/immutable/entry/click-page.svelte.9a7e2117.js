import{S as E,i as P,s as R,k as F,l as O,m as q,h as C,n as D,b as G,I as v,o as N,w as V}from"../chunks/index.b44bd5b3.js";import{P as $,S as B,W as T,A as I,D as U,H as X,a as Y,M as J,b as K,R as Q,V as Z,L as ee,C as ne,c as te}from"../chunks/three.module.a6fd982f.js";import{G as ae}from"../chunks/GLTFLoader.a254f7ff.js";function ie(h){let n;return{c(){n=F("canvas"),this.h()},l(i){n=O(i,"CANVAS",{id:!0}),q(n).forEach(C),this.h()},h(){D(n,"id","canvas")},m(i,d){G(i,n,d),h[1](n)},p:v,i:v,o:v,d(i){i&&C(n),h[1](null)}}}function oe(h,n,i){let d,o,s,r,f,S,p;N(()=>{x(),_()});function x(){o=new $(45,window.innerWidth/window.innerHeight,1,2e3),o.position.set(100,100,100),o.lookAt(-20,0,-20),s=new B,r=new T({antialias:!0,canvas:d}),r.setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth,window.innerHeight),r.shadowMap.enabled=!0,r.toneMapping=I,window.addEventListener("resize",y);const e=new U(16777215,1);e.position.set(-1,1,.5),e.castShadow=!0,e.shadow.camera.top=180,e.shadow.camera.bottom=-100,e.shadow.camera.left=-120,e.shadow.camera.right=120,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,e.shadow.camera.near=.5,e.shadow.camera.far=500,s.add(e),p=new X(16777215,5592405,1),p.position.set(0,-1,0),s.add(p);const A=new ae,H=document.querySelector("input.baseUrl").value;A.load(`${H}click/model.glb`,function(u){const c=u.scene;if(c.position.set(0,0,0),c.scale.set(.1,.1,.1),s.add(c),f=new Y(c),S=c.getObjectByName("rocket"),c.traverse(function(l){l.isMesh&&(l.material=new J({color:l.material.color,roughness:.3}),l.castShadow=!0,l.receiveShadow=!0)}),u.animations.length>0){let W=function(a){b.x=a.clientX/window.innerWidth*2-1,b.y=-(a.clientY/window.innerHeight)*2+1},z=function(a){L.setFromCamera(b,o);const t=L.intersectObjects(s.children,!0);if(t.length>0&&t[0].object.name.toLowerCase().includes("button")){const m=g.find(w=>w.name==t[0].object.name.toLowerCase());if(m){const w=f.clipAction(m);w.loop=ee,w.reset(),w.play(),s.background=new ne(t[0].object.material.color.getHex());const M=c.getObjectByName("change");M&&(M.material.color=t[0].object.material.color),p.color=t[0].object.material.color}}};const l=u.animations[0].tracks,g=[];l.forEach(a=>{const t=g.find(m=>m.name==a.name.split(".")[0]);if(t)t.tracks.push(a);else{const m=new K(a.name.split(".")[0],-1,[a]);g.push(m)}});const L=new Q,b=new Z;window.addEventListener("mousemove",W,!1),window.addEventListener("click",z,!1)}})}function y(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}const k=new te;function _(){requestAnimationFrame(_),f&&f.update(k.getDelta()),S.rotation.y+=.01,r.render(s,o)}function j(e){V[e?"unshift":"push"](()=>{d=e,i(0,d)})}return[d,j]}class le extends E{constructor(n){super(),P(this,n,oe,ie,R,{})}}export{le as default};
