import{S as q,i as G,s as k,k as y,a as D,l as b,m as x,h as u,c as F,n as _,b as C,E as I,I as L,o as T,w as V}from"../chunks/index.2ecc7cbf.js";import{P as $,S as B,C as E,W as N,s as U,A as J,H as K,a as O,e as M,i as Q,h as X}from"../chunks/three.module.a6fd982f.js";import{G as Y}from"../chunks/GLTFLoader.a254f7ff.js";function Z(p){let t,l,a,n;return{c(){t=y("canvas"),l=D(),a=y("div"),n=y("div"),this.h()},l(s){t=b(s,"CANVAS",{id:!0,class:!0}),x(t).forEach(u),l=F(s),a=b(s,"DIV",{class:!0});var i=x(a);n=b(i,"DIV",{class:!0});var c=x(n);c.forEach(u),i.forEach(u),this.h()},h(){_(t,"id","canvas"),_(t,"class","svelte-je6myb"),_(n,"class","svelte-je6myb"),_(a,"class","scroll svelte-je6myb")},m(s,i){C(s,t,i),p[1](t),C(s,l,i),C(s,a,i),I(a,n)},p:L,i:L,o:L,d(s){s&&u(t),p[1](null),s&&u(l),s&&u(a)}}}function ee(p,t,l){let a,n,s,i,c,f,h;T(()=>{H(),P()});function H(){n=new $(45,window.innerWidth/window.innerHeight,1,2e3),n.position.set(0,0,200),s=new B,s.background=new E(0),i=new N({antialias:!0,canvas:a}),i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),i.outputEncoding=U,i.shadowMap.enabled=!0,i.toneMapping=J,window.addEventListener("resize",A);const w=new K(16777215,0,.01);w.position.set(0,1,0),s.add(w);const R=new Y,j=document.querySelector("input.baseUrl").value;R.load(`${j}scroll/model.glb`,function(d){const v=d.scene;v.position.set(0,0,0);const m=.1;v.scale.set(m,m,m),c=new O(v),s.add(v),h=c.clipAction(d.animations[0]),h.play();const g=document.querySelector(".scroll"),S=h.getClip().duration,r=d.cameras[0];r&&(n.position.set(r.position.x*m,r.position.y*m,r.position.z*m),n.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z),n.fov=r.fov),d.scene.traverse(function(e){if(e.isMesh&&(e.material=new M({color:e.material.color,emissive:e.material.emissive,roughness:1}),e.castShadow=!0,e.receiveShadow=!0),e.name.toLowerCase().includes("light")){const o=new Q(16777215,1,200);o.position.set(e.position.x,e.position.y,e.position.z),e.add(o);const z=new E("hsl(40,100%,100%)");o.color=z,o.castShadow=!0,o.shadow.mapSize.width=512,o.shadow.mapSize.height=512,o.shadow.camera.near=.5,o.shadow.camera.far=500,o.shadow.radius=10,e.material.emissive=z}e.name.toLowerCase().includes("noshadow")&&(e.castShadow=!1,e.receiveShadow=!1),e.name.toLowerCase().includes("glass")&&(e.material=new M({color:e.material.color,transmission:1,roughness:.5,ior:1.8,emissive:e.material.emissive}),e.material.side=X)}),g.addEventListener("scroll",e=>{f=g.scrollTop/(g.scrollHeight-g.clientHeight)*S,f>S-.03&&(f=S-.03),h.time=f,c.update(.01)})},void 0,function(d){console.error(d)})}function A(){n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)}function P(){requestAnimationFrame(P),c&&c.update(.001),i.render(s,n)}function W(w){V[w?"unshift":"push"](()=>{a=w,l(0,a)})}return[a,W]}class ae extends q{constructor(t){super(),G(this,t,ee,Z,k,{})}}export{ae as default};
