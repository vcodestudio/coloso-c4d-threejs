import{S as D,i as F,s as j,k as y,a as H,q as G,l as M,m as E,h as p,c as q,r as $,n as A,b as N,E as c,I as T,o as V,w as B}from"../chunks/index.2ecc7cbf.js";import{C,P as U,S as J,W as K,s as O,A as Q,T as X,d as Y,H as Z,D as ee,e as te}from"../chunks/three.module.a6fd982f.js";import{G as ne}from"../chunks/GLTFLoader.a254f7ff.js";function oe(R){let l,_,e,r,s,d,a,u,g,v,S,P,k,n;return{c(){l=y("canvas"),_=H(),e=y("div"),r=y("span"),s=H(),d=y("span"),a=G(":"),u=H(),g=y("span"),v=H(),S=y("span"),P=G(":"),k=H(),n=y("span"),this.h()},l(o){l=M(o,"CANVAS",{id:!0}),E(l).forEach(p),_=q(o),e=M(o,"DIV",{class:!0});var t=E(e);r=M(t,"SPAN",{class:!0}),E(r).forEach(p),s=q(t),d=M(t,"SPAN",{});var f=E(d);a=$(f,":"),f.forEach(p),u=q(t),g=M(t,"SPAN",{class:!0}),E(g).forEach(p),v=q(t),S=M(t,"SPAN",{});var h=E(S);P=$(h,":"),h.forEach(p),k=q(t),n=M(t,"SPAN",{class:!0}),E(n).forEach(p),t.forEach(p),this.h()},h(){A(l,"id","canvas"),A(r,"class","hour"),A(g,"class","min"),A(n,"class","sec"),A(e,"class","time svelte-1m1g914")},m(o,t){N(o,l,t),R[1](l),N(o,_,t),N(o,e,t),c(e,r),c(e,s),c(e,d),c(d,a),c(e,u),c(e,g),c(e,v),c(e,S),c(S,P),c(e,k),c(e,n)},p:T,i:T,o:T,d(o){o&&p(l),R[1](null),o&&p(_),o&&p(e)}}}function ae(R,l,_){let e,r,s,d,a={hour:null,min:null,sec:null,orbit:null,right:null,left:null};const u={day:{sky:new C("hsl(45,100%,60%)"),ground:new C("hsl(10,100%,50%)"),background:new C("hsl(20,80%,10%)")},night:{sky:16777215,ground:new C("hsl(180,80%,25%)"),background:new C("hsl(200,80%,15%)")}};V(()=>{g(),P()});function g(){e=new U(30,window.innerWidth/window.innerHeight,1,2e3),e.position.set(0,0,100),r=new J,s=new K({antialias:!0,canvas:d}),s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight),s.outputEncoding=O,s.shadowMap.enabled=!0,s.toneMapping=Q,s.toneMappingExposure=1;const n=new X().load("/sky/sky.jpg",function(){const f=new Y(s);f.compileEquirectangularShader(),f.fromEquirectangular(n),n.dispose()});window.addEventListener("resize",S);const o=new ne,t=document.querySelector("input.baseUrl").value;o.load(`${t}time/model.glb`,function(f){const h=f.scene,w=.1;h.position.set(0,0,0),h.scale.set(w,w,w),r.add(h),console.log(h);let b=u.day.sky,L=u.day.ground,z=u.day.background,I=new Date().getHours();I=3,(I<6||I>18)&&(b=u.night.sky,L=u.night.ground,z=u.night.background),s.setClearColor(z,1);const W=new Z(b,L,.5);W.position.set(0,1,0),r.add(W);const m=new ee(b,1);m.position.set(0,1,1),m.castShadow=!0,m.shadow.mapSize.width=2048,m.shadow.mapSize.height=2048,m.shadow.camera.left=-100,m.shadow.camera.right=100,m.shadow.camera.top=100,m.shadow.camera.bottom=-100,m.shadow.radius=2,r.add(m),h.traverse(function(i){if(["hour","min","sec","orbit","right","left"].forEach(x=>{i.name.toLowerCase().includes(x)&&(a[x]=i)}),i.isMesh){const x=i.material;i.material=new te({color:x.color,roughness:x.roughness}),i.castShadow=!0,i.receiveShadow=!0}i.name.toLowerCase().includes("camera")&&(e.position.set(i.position.x*w,i.position.y*w,i.position.z*w),e.rotation.set(i.rotation.x,i.rotation.y,i.rotation.z))}),v()})}function v(){const n=new Date;let o=n.getHours();const t=n.getMinutes(),f=o/24,h=t/60,w=n.getSeconds()/60,b=document.querySelector(".hour"),L=document.querySelector(".min"),z=document.querySelector(".sec");b&&(b.innerHTML=o<10?`0${o}`:o),L&&(L.innerHTML=t<10?`0${t}`:t),z&&(z.innerHTML=n.getSeconds()<10?`0${n.getSeconds()}`:n.getSeconds()),a.hour&&(a.hour.rotation.z=-Math.PI*2*2*f),a.min&&(a.min.rotation.z=-Math.PI*2*h),a.sec&&(a.sec.rotation.z=-Math.PI*2*w)}function S(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}function P(){requestAnimationFrame(P),v(),a.right&&(a.right.rotation.z+=.001*Math.PI),a.left&&(a.left.rotation.z+=-.001*Math.PI/2),a.orbit&&(a.orbit.rotation.y+=.001*Math.PI),s.render(r,e)}function k(n){B[n?"unshift":"push"](()=>{d=n,_(0,d)})}return[d,k]}class le extends D{constructor(l){super(),F(this,l,ae,oe,j,{})}}export{le as default};
