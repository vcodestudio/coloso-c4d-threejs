import{S as I,i as F,s as j,k as y,a as H,q as $,l as E,m as _,h as p,c as q,r as D,n as A,b as T,E as c,I as W,o as V,w as B}from"../chunks/index.2ecc7cbf.js";import{C,P as U,S as J,W as K,s as O,A as Q,T as X,d as Y,H as Z,D as ee,e as te}from"../chunks/three.module.a6fd982f.js";import{G as ne}from"../chunks/GLTFLoader.a254f7ff.js";function oe(R){let l,v,e,i,s,d,r,u,g,M,S,b,k,n;return{c(){l=y("canvas"),v=H(),e=y("div"),i=y("span"),s=H(),d=y("span"),r=$(":"),u=H(),g=y("span"),M=H(),S=y("span"),b=$(":"),k=H(),n=y("span"),this.h()},l(o){l=E(o,"CANVAS",{id:!0}),_(l).forEach(p),v=q(o),e=E(o,"DIV",{class:!0});var t=_(e);i=E(t,"SPAN",{class:!0}),_(i).forEach(p),s=q(t),d=E(t,"SPAN",{});var w=_(d);r=D(w,":"),w.forEach(p),u=q(t),g=E(t,"SPAN",{class:!0}),_(g).forEach(p),M=q(t),S=E(t,"SPAN",{});var h=_(S);b=D(h,":"),h.forEach(p),k=q(t),n=E(t,"SPAN",{class:!0}),_(n).forEach(p),t.forEach(p),this.h()},h(){A(l,"id","canvas"),A(i,"class","hour"),A(g,"class","min"),A(n,"class","sec"),A(e,"class","time svelte-1m1g914")},m(o,t){T(o,l,t),R[1](l),T(o,v,t),T(o,e,t),c(e,i),c(e,s),c(e,d),c(d,r),c(e,u),c(e,g),c(e,M),c(e,S),c(S,b),c(e,k),c(e,n)},p:W,i:W,o:W,d(o){o&&p(l),R[1](null),o&&p(v),o&&p(e)}}}function se(R,l,v){let e,i,s,d,r={hour:null,min:null,sec:null,orbit:null,right:null,left:null};const u={day:{sky:new C("hsl(45,100%,60%)"),ground:new C("hsl(10,100%,50%)"),background:new C("hsl(20,80%,10%)")},night:{sky:16777215,ground:new C("hsl(180,80%,25%)"),background:new C("hsl(200,80%,15%)")}};V(()=>{g(),b()});function g(){e=new U(30,window.innerWidth/window.innerHeight,1,2e3),e.position.set(0,0,100),i=new J,s=new K({antialias:!0,canvas:d}),s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight),s.outputEncoding=O,s.shadowMap.enabled=!0,s.toneMapping=Q,s.toneMappingExposure=1;const n=new X().load("/sky/sky.jpg",function(){const w=new Y(s);w.compileEquirectangularShader(),w.fromEquirectangular(n),n.dispose()});window.addEventListener("resize",S);const o=new ne,t=document.querySelector("input.baseUrl").value;o.load(`${t}time/model.glb`,function(w){const h=w.scene,f=.1;h.position.set(0,0,0),h.scale.set(f,f,f),i.add(h),console.log(h);let P=u.day.sky,L=u.day.ground,x=u.day.background,N=new Date().getHours();N=3,(N<6||N>18)&&(P=u.night.sky,L=u.night.ground,x=u.night.background),s.setClearColor(x,1);const G=new Z(P,L,.5);G.position.set(0,1,0),i.add(G);const m=new ee(P,1);m.position.set(0,1,1),m.castShadow=!0,m.shadow.mapSize.width=2048,m.shadow.mapSize.height=2048,m.shadow.camera.left=-100,m.shadow.camera.right=100,m.shadow.camera.top=100,m.shadow.camera.bottom=-100,m.shadow.radius=2,i.add(m),h.traverse(function(a){if(["hour","min","sec","orbit","right","left"].forEach(z=>{a.name.toLowerCase().includes(z)&&(r[z]=a)}),a.isMesh){const z=a.material;a.material=new te({color:z.color,roughness:z.roughness}),a.castShadow=!0,a.receiveShadow=!0}a.name.toLowerCase().includes("camera")&&(e.position.set(a.position.x*f,a.position.y*f,a.position.z*f),e.rotation.set(a.rotation.x,a.rotation.y,a.rotation.z))}),M()})}function M(){const n=new Date;let o=n.getHours();const t=n.getMinutes(),w=o/24,h=t/60,f=n.getSeconds()/60,P=document.querySelector(".hour"),L=document.querySelector(".min"),x=document.querySelector(".sec");P&&(P.innerHTML=o<10?`0${o}`:o),L&&(L.innerHTML=t<10?`0${t}`:t),x&&(x.innerHTML=n.getSeconds()<10?`0${n.getSeconds()}`:n.getSeconds()),r.hour&&(r.hour.rotation.z=-Math.PI*2*2*w),r.min&&(r.min.rotation.z=-Math.PI*2*h),r.sec&&(r.sec.rotation.z=-Math.PI*2*f)}function S(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}function b(){requestAnimationFrame(b),M(),s.render(i,e)}function k(n){B[n?"unshift":"push"](()=>{d=n,v(0,d)})}return[d,k]}class le extends I{constructor(l){super(),F(this,l,se,oe,j,{})}}export{le as default};
