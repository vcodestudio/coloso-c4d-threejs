import{S as J,i as Q,s as X,k as y,a as R,q as V,l as z,m as k,h,c as C,r as K,n as P,b as L,E as g,L as W,I as x,M as Y,o as Z,w as $}from"../chunks/index.b44bd5b3.js";import{C as D,f as G,W as ee,P as oe,S as se,G as ne,e as te,g as ae,h as ie,i as re,H as de,V as ce}from"../chunks/three.module.a6fd982f.js";import{G as le}from"../chunks/GLTFLoader.a254f7ff.js";import{E as we,R as fe,U as ue}from"../chunks/UnrealBloomPass.f7db90c7.js";function me(f){let l,t,a,e,r,d,n,_,u,m;return{c(){l=y("canvas"),t=R(),a=y("div"),e=y("div"),r=V("W"),d=R(),n=y("div"),_=V("S"),this.h()},l(s){l=z(s,"CANVAS",{class:!0}),k(l).forEach(h),t=C(s),a=z(s,"DIV",{class:!0});var c=k(a);e=z(c,"DIV",{class:!0});var o=k(e);r=K(o,"W"),o.forEach(h),d=C(c),n=z(c,"DIV",{class:!0});var S=k(n);_=K(S,"S"),S.forEach(h),c.forEach(h),this.h()},h(){P(l,"class","svelte-1neru2o"),P(e,"class","svelte-1neru2o"),P(n,"class","svelte-1neru2o"),P(a,"class","buttons svelte-1neru2o")},m(s,c){L(s,l,c),f[2](l),L(s,t,c),L(s,a,c),g(a,e),g(e,r),g(a,d),g(a,n),g(n,_),u||(m=[W(e,"mousedown",f[3]),W(e,"mouseup",f[4]),W(n,"mousedown",f[5]),W(n,"mouseup",f[6])],u=!0)},p:x,i:x,o:x,d(s){s&&h(l),f[2](null),s&&h(t),s&&h(a),u=!1,Y(m)}}}let pe=.7,he=0,_e=.8;const q=100;function ve(f,l,t){let a,e,r,d,n,_=performance.now(),u=0;new D("hsl(200, 50%, 50%)");let m=new G(0,0,0),s,c;new G(0,0,0);const o={forward:!1,backward:!1};Z(()=>{S(),E()});function S(){d=new ee({antialias:!0,canvas:a}),d.setPixelRatio(window.devicePixelRatio),d.setSize(window.innerWidth,window.innerHeight),e=new oe(45,window.innerWidth/window.innerHeight,.1,3e3),e.position.set(0,0,0),d.gammaFactor=2.2,d.gammaOutput=!0,r=new se,r.background=new D(0);const i=new ne;i.position.copy(e.position),i.rotation.copy(e.rotation),r.add(i),i.add(e),window.addEventListener("resize",F),window.addEventListener("keydown",I),window.addEventListener("keyup",T);const j=new le,N=document.querySelector("input.baseUrl").value;j.load(`${N}move/model.glb`,function(H){n=H.scene,n.position.set(0,0,0),console.log(n);const v=.1;n.scale.set(v,v,v),r.add(n);const b=H.cameras[0];e.position.set(b.position.x*v,b.position.y*v,b.position.z*v),e.rotation.set(b.rotation.x,b.rotation.y,b.rotation.z),m=e.position.clone(),n.traverse(function(w){if(w.isMesh){const O=w.material;w.material=new te({color:16777215,roughness:.5,metalic:1}),w.castShadow=!0,w.receiveShadow=!0,w.name=="light"&&(console.log(O),w.material=new ae({color:16777215}),w.castShadow=!1,w.receiveShadow=!1,w.material.side=ie)}})});const p=new re(16777215,1);p.position.set(0,0,0),r.add(p),p.castShadow=!0,p.shadow.mapSize.width=2048,p.shadow.mapSize.height=2048,p.shadow.camera.near=.5,p.shadow.camera.far=2e3;const M=new de(0,16777215,.3);M.position.set(1,0,1),r.add(M),U()}function I(i){switch(i.code){case"KeyW":t(1,o.forward=!0,o);break;case"KeyS":t(1,o.backward=!0,o);break}}function T(i){switch(i.code){case"KeyW":t(1,o.forward=!1,o);break;case"KeyS":t(1,o.backward=!1,o);break}}function U(){s=new we(d),s.addPass(new fe(r,e)),c=new ue(new ce(window.innerWidth,window.innerHeight),pe,he,_e),c.renderToScreen=!0,s.addPass(c)}function E(){const i=performance.now();requestAnimationFrame(E),u=(i-_)/1e3,_=i,o.forward&&(e.position.z-=q*u),o.backward?e.position.z+=q*u:e.position.z-=30*u,e.position.z<-50&&(e.position.z=m.z),e.position.z>m.z&&(e.position.z=m.z),A()}function A(){d.render(r,e),s.render()}function F(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight)}function B(i){$[i?"unshift":"push"](()=>{a=i,t(0,a)})}return[a,o,B,()=>{t(1,o.forward=1,o)},()=>{t(1,o.forward=0,o)},()=>{t(1,o.backward=1,o)},()=>{t(1,o.backward=0,o)}]}class Le extends J{constructor(l){super(),Q(this,l,ve,me,X,{})}}export{Le as default};
