import{S as P,i as R,s as F,k as O,l as q,m as D,h as C,n as x,b as G,J as S,o as N,w as V}from"../chunks/index.32e2af34.js";import{P as $,S as B,W as T,A as J,D as U,H as X,a as Y,M as I,b as K,R as Q,V as Z,L as ee,C as ne,c as te}from"../chunks/three.module.a6fd982f.js";import{G as ae}from"../chunks/GLTFLoader.a254f7ff.js";function ie(h){let n;return{c(){n=O("canvas"),this.h()},l(i){n=q(i,"CANVAS",{id:!0,class:!0}),D(n).forEach(C),this.h()},h(){x(n,"id","canvas"),x(n,"class","svelte-vuwzia")},m(i,d){G(i,n,d),h[1](n)},p:S,i:S,o:S,d(i){i&&C(n),h[1](null)}}}function oe(h,n,i){let d,o,s,r,f,u,p;N(()=>{y(),_()});function y(){o=new $(45,window.innerWidth/window.innerHeight,1,2e3),o.position.set(100,100,100),o.lookAt(-20,0,-20),s=new B,r=new T({antialias:!0,canvas:d}),r.setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth,window.innerHeight),r.shadowMap.enabled=!0,r.toneMapping=J,window.addEventListener("resize",k);const e=new U(16777215,1);e.position.set(-1,1,.5),e.castShadow=!0,e.shadow.camera.top=180,e.shadow.camera.bottom=-100,e.shadow.camera.left=-120,e.shadow.camera.right=120,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,e.shadow.camera.near=.5,e.shadow.camera.far=500,s.add(e),p=new X(16777215,5592405,1),p.position.set(0,-1,0),s.add(p);const H=new ae,W=document.querySelector("input.baseUrl").value;H.load(`${W}click/model.glb`,function(g){const c=g.scene;if(c.position.set(0,0,0),c.scale.set(.1,.1,.1),s.add(c),f=new Y(c),u=c.getObjectByName("rocket"),c.traverse(function(l){l.isMesh&&(l.material=new I({color:l.material.color,roughness:.3}),l.castShadow=!0,l.receiveShadow=!0)}),g.animations.length>0){let z=function(a){v.x=a.clientX/window.innerWidth*2-1,v.y=-(a.clientY/window.innerHeight)*2+1},E=function(a){L.setFromCamera(v,o);const t=L.intersectObjects(s.children,!0);if(t.length>0&&t[0].object.name.toLowerCase().includes("button")){const w=b.find(m=>m.name==t[0].object.name.toLowerCase());if(w){const m=f.clipAction(w);m.loop=ee,m.reset(),m.play(),s.background=new ne(t[0].object.material.color.getHex());const M=c.getObjectByName("change");M&&(M.material.color=t[0].object.material.color),p.color=t[0].object.material.color}}};const l=g.animations[0].tracks,b=[];l.forEach(a=>{const t=b.find(w=>w.name==a.name.split(".")[0]);if(t)t.tracks.push(a);else{const w=new K(a.name.split(".")[0],-1,[a]);b.push(w)}});const L=new Q,v=new Z;window.addEventListener("mousemove",z,!1),window.addEventListener("click",E,!1)}})}function k(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}const j=new te;function _(){requestAnimationFrame(_),f&&f.update(j.getDelta()),u&&(u.rotation.y+=.01),r.render(s,o)}function A(e){V[e?"unshift":"push"](()=>{d=e,i(0,d)})}return[d,A]}class le extends P{constructor(n){super(),R(this,n,oe,ie,F,{})}}export{le as default};
