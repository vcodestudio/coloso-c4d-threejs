import{S as O,i as Q,s as X,k,a as R,q as V,l as z,m as P,h,c as C,r as K,n as L,b as W,E as S,L as g,J as E,M as Y,o as Z,w as $}from"../chunks/index.32e2af34.js";import{C as D,f as G,W as ee,P as oe,S as se,G as te,e as ne,g as ae,h as re,i as ie,H as de,V as ce}from"../chunks/three.module.a6fd982f.js";import{G as le}from"../chunks/GLTFLoader.a254f7ff.js";import{E as we,R as ue,U as fe}from"../chunks/UnrealBloomPass.f7db90c7.js";function me(l){let w,s,a,o,i,d,t,_,f,m;return{c(){w=k("canvas"),s=R(),a=k("div"),o=k("div"),i=V("W"),d=R(),t=k("div"),_=V("S"),this.h()},l(n){w=z(n,"CANVAS",{class:!0}),P(w).forEach(h),s=C(n),a=z(n,"DIV",{class:!0});var c=P(a);o=z(c,"DIV",{class:!0});var e=P(o);i=K(e,"W"),e.forEach(h),d=C(c),t=z(c,"DIV",{class:!0});var y=P(t);_=K(y,"S"),y.forEach(h),c.forEach(h),this.h()},h(){L(w,"class","svelte-tt8u3v"),L(o,"class","svelte-tt8u3v"),L(t,"class","svelte-tt8u3v"),L(a,"class","buttons svelte-tt8u3v")},m(n,c){W(n,w,c),l[2](w),W(n,s,c),W(n,a,c),S(a,o),S(o,i),S(a,d),S(a,t),S(t,_),f||(m=[g(o,"mousedown",l[3]),g(o,"mouseup",l[4]),g(o,"touchstart",l[5],{passive:!0}),g(t,"mousedown",l[6]),g(t,"mouseup",l[7]),g(t,"touchstart",l[8],{passive:!0})],f=!0)},p:E,i:E,o:E,d(n){n&&h(w),l[2](null),n&&h(s),n&&h(a),f=!1,Y(m)}}}let pe=.7,he=0,_e=.8;const q=100;function ve(l,w,s){let a,o,i,d,t,_=performance.now(),f=0;new D("hsl(200, 50%, 50%)");let m=new G(0,0,0),n,c;new G(0,0,0);const e={forward:!1,backward:!1};Z(()=>{y(),M()});function y(){d=new ee({antialias:!0,canvas:a}),d.setPixelRatio(window.devicePixelRatio),d.setSize(window.innerWidth,window.innerHeight),o=new oe(45,window.innerWidth/window.innerHeight,.1,3e3),o.position.set(0,0,0),d.gammaFactor=2.2,d.gammaOutput=!0,i=new se,i.background=new D(0);const r=new te;r.position.copy(o.position),r.rotation.copy(o.rotation),i.add(r),r.add(o),window.addEventListener("resize",I),window.addEventListener("keydown",T),window.addEventListener("keyup",U),window.addEventListener("touchend",()=>{console.log("touchend"),s(1,e.forward=!1,e),s(1,e.backward=!1,e)});const j=new le,J=document.querySelector("input.baseUrl").value;j.load(`${J}move/model.glb`,function(H){t=H.scene,t.position.set(0,0,0),console.log(t);const v=.1;t.scale.set(v,v,v),i.add(t);const b=H.cameras[0];o.position.set(b.position.x*v,b.position.y*v,b.position.z*v),o.rotation.set(b.rotation.x,b.rotation.y,b.rotation.z),m=o.position.clone(),t.traverse(function(u){if(u.isMesh){const N=u.material;u.material=new ne({color:16777215,roughness:.5,metalic:1}),u.castShadow=!0,u.receiveShadow=!0,u.name=="light"&&(console.log(N),u.material=new ae({color:16777215}),u.castShadow=!1,u.receiveShadow=!1,u.material.side=re)}})});const p=new ie(16777215,1);p.position.set(0,0,0),i.add(p),p.castShadow=!0,p.shadow.mapSize.width=2048,p.shadow.mapSize.height=2048,p.shadow.camera.near=.5,p.shadow.camera.far=2e3;const x=new de(0,16777215,.3);x.position.set(1,0,1),i.add(x),A()}function T(r){switch(r.code){case"KeyW":s(1,e.forward=!0,e);break;case"KeyS":s(1,e.backward=!0,e);break}}function U(r){switch(r.code){case"KeyW":s(1,e.forward=!1,e);break;case"KeyS":s(1,e.backward=!1,e);break}}function A(){n=new we(d),n.addPass(new ue(i,o)),c=new fe(new ce(window.innerWidth,window.innerHeight),pe,he,_e),c.renderToScreen=!0,n.addPass(c)}function M(){const r=performance.now();requestAnimationFrame(M),f=(r-_)/1e3,_=r,e.forward&&(o.position.z-=q*f),e.backward?o.position.z+=q*f:o.position.z-=30*f,o.position.z<-50&&(o.position.z=m.z),o.position.z>m.z&&(o.position.z=m.z),F()}function F(){d.render(i,o),n.render()}function I(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight)}function B(r){$[r?"unshift":"push"](()=>{a=r,s(0,a)})}return[a,e,B,()=>{s(1,e.forward=1,e)},()=>{s(1,e.forward=0,e)},()=>{s(1,e.forward=1,e)},()=>{s(1,e.backward=1,e)},()=>{s(1,e.backward=0,e)},()=>{s(1,e.backward=1,e)}]}class Me extends O{constructor(w){super(),Q(this,w,ve,me,X,{})}}export{Me as default};
