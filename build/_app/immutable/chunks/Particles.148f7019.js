import{X as S,C as b,B as h,z as C,T as m,ar as w,a1 as P}from"./three.module.a6fd982f.js";function s(M){let e=Math.sin(M)*1e4;return e-Math.floor(e)}class z{constructor(e){this.scene=e.scene,this.particles,this.particleCount=e.particleCount??0,this.particleSystem,this.particles2,this.particleCount2=e.particleCount??0,this.particleSystem2,this.particleSystem3,this.originalParticlePositions=[],this.init()}init(){this.particleCount=1e3,this.particles=new S;let e=new Float32Array(this.particleCount*3),r=new Float32Array(this.particleCount*3),i=new b,u=new Float32Array(this.particleCount),a=20;for(let t=0;t<this.particleCount;t++){let p=Math.sin(t/this.particleCount*Math.PI*2)*a+(s(t*3)-.5)*a,c=(s(t*3+1)-.5)*a*.5,y=Math.cos(t/this.particleCount*Math.PI*2)*a+(s(t*3+2)-.5)*a;e[t*3]=p,e[t*3+1]=c,e[t*3+2]=y,i.setHSL((p+c+60)*.15/16,.5,Math.random()),r[t*3]=i.r,r[t*3+1]=i.g,r[t*3+2]=i.b,u[t]=10*(.1+Math.random())}this.particles.setAttribute("position",new h(e,3)),this.particles.setAttribute("color",new h(r,3)),this.originalParticlePositions=e;const d=document.querySelector("input.baseUrl").value;let g=new C({size:.5,vertexColors:!0,map:new m().load(`${d}particle/circle.png`),blending:w,transparent:!0,depthWrite:!1,opacity:.8});this.particleSystem=new P(this.particles,g),this.scene.add(this.particleSystem),this.particleCount2=200,this.particles2=new S;let l=new Float32Array(this.particleCount2*3),o=new Float32Array(this.particleCount2*3),n=new b;for(let t=0;t<this.particleCount2;t++){let p=(Math.sin(t/this.particleCount2*Math.PI*2)+(s(t*3)-.5)*.5)*20,c=(s(t*3+1)-.5)*20,y=(Math.cos(t/this.particleCount2*Math.PI*2)+(s(t*3+2)-.5)*.5)*20;l[t*3]=p,l[t*3+1]=c,l[t*3+2]=y,n.setHSL(.55,.5,s(t*3)*.001),o[t*3]=n.r,o[t*3+1]=n.g,o[t*3+2]=n.b}this.particles2.setAttribute("position",new h(l,3)),this.particles2.setAttribute("color",new h(o,3));let f=new C({vertexColors:!0,size:20,map:new m().load(`${d}particle/cloud.png`),blending:w,transparent:!0,opacity:.005,depthWrite:!1});this.particleSystem2=new P(this.particles,f),this.scene.add(this.particleSystem2);let A=new C({vertexColors:!0,size:100,map:new m().load(`${d}particle/cloud.png`),blending:w,transparent:!0,opacity:1,depthWrite:!1});this.particleSystem3=new P(this.particles2,A),this.scene.add(this.particleSystem3)}update(){this.particleSystem.rotation.y+=.001,this.particleSystem2.rotation.y+=.001,this.particleSystem3.rotation.y+=.001;let r=this.particles.attributes.position.array;for(let i=0;i<this.particleCount;i++){this.originalParticlePositions[i*3];let u=this.originalParticlePositions[i*3+1];this.originalParticlePositions[i*3+2],r[i*3+1]=u+Math.sin((i+this.particleSystem.rotation.y)*.001*3e4)*.001*10}this.particles.attributes.position.needsUpdate=!0}}export{z as C};
